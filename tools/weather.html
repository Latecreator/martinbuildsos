<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ODI Weather & Pitch Charts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;700&display=swap');

        :root {
            --aus-gold: #FFCD00; --aus-teal: #00877a;
            --bg-green: #2d944e; --bg-red: #8b0000; /* Darker maroon for text */
            --eng-navy: #001e4a; --eng-blue: #00a3e0;
            --ind-blue: #0072bc; --ind-yellow: #ffcb05; --ind-orange: #f26d21;
            --zim-red: #cc0000; --zim-gold: #FFCD00;
            --sha-sand: #c2a370; --sha-teal: #006666;
            --wi-maroon: #7b0000; --wi-gold: #ffcc00;
            --sa-green: #006a4e; --sa-gold: #ffcc00;
            --sl-blue: #002f6c; --sl-yellow: #ffcc00;
            --nz-black: #1a1a1a; --nz-silver: #a0a0a0;
            --pak-green: #004d00; --pak-gold: #ffcc00;
            --gen-grey: #475569; --gen-light: #94a3b8;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f3f4f6; 
            transition: background-color 0.3s ease; 
            margin: 0; padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .cricket-font { font-family: 'Bungee', cursive; }

        /* Info Capsules */
        .info-capsule {
            display: flex; flex-direction: column; align-items: center; width: 100%; min-height: 85px;
            border-radius: 6px; padding: 0; font-weight: 800; text-align: center; line-height: 1;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); overflow: hidden;
            transition: transform 0.2s, background-color 0.3s;
        }
        
        .num-container { 
            width: 100%; padding: 4px 0; font-size: 0.95rem; 
            border-bottom: 1px solid rgba(0,0,0,0.08);
            color: white;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            background-color: rgba(0,0,0,0.1);
        }
        .txt-container {
            padding: 4px 2px; flex-grow: 1; display: flex; align-items: center; justify-content: center;
        }

        /* Active Tab Styling */
        .tab-btn {
            transition: all 0.2s; cursor: pointer; padding: 12px 14px; font-weight: bold;
            text-transform: uppercase; font-size: 0.65rem; min-width: 80px; text-align: center; border-bottom: 3px solid transparent;
            display: flex; align-items: center; justify-content: center; height: 100%;
            white-space: nowrap;
        }
        .tab-btn:hover:not(.active-tab) { background-color: #f8fafc; }

        .theme-aus .active-tab { background-color: var(--aus-teal) !important; color: var(--aus-gold) !important; border-bottom: 4px solid var(--aus-gold); }
        .theme-bangladesh .active-tab { background-color: var(--bg-green) !important; color: white !important; border-bottom: 4px solid var(--bg-red); }
        .theme-england .active-tab { background-color: var(--eng-navy) !important; color: white !important; border-bottom: 4px solid var(--eng-blue); }
        .theme-india .active-tab { background-color: var(--ind-blue) !important; color: var(--ind-yellow) !important; border-bottom: 4px solid var(--ind-yellow); }
        .theme-zimbabwe .active-tab { background-color: var(--zim-red) !important; color: var(--zim-gold) !important; border-bottom: 4px solid var(--zim-gold); }
        .theme-sharjah .active-tab { background-color: var(--sha-sand) !important; color: var(--sha-teal) !important; border-bottom: 4px solid var(--sha-teal); }
        .theme-westindies .active-tab { background-color: var(--wi-maroon) !important; color: var(--wi-gold) !important; border-bottom: 4px solid var(--wi-gold); }
        .theme-southafrica .active-tab { background-color: var(--sa-green) !important; color: var(--sa-gold) !important; border-bottom: 4px solid var(--sa-gold); }
        .theme-srilanka .active-tab { background-color: var(--sl-blue) !important; color: var(--sl-yellow) !important; border-bottom: 4px solid var(--sl-yellow); }
        .theme-newzealand .active-tab { background-color: var(--nz-black) !important; color: var(--nz-silver) !important; border-bottom: 4px solid var(--nz-silver); }
        .theme-pakistan .active-tab { background-color: var(--pak-green) !important; color: var(--pak-gold) !important; border-bottom: 4px solid var(--pak-gold); }
        .theme-general .active-tab { background-color: var(--gen-grey) !important; color: white !important; border-bottom: 4px solid var(--gen-light); }

        .theme-aus .team-banner { background-color: var(--aus-teal); color: var(--aus-gold); }
        .theme-bangladesh .team-banner { background-color: var(--bg-green); color: var(--bg-red); } 
        .theme-england .team-banner { background-color: var(--eng-navy); color: #fff; }
        .theme-india .team-banner { background-color: var(--ind-blue); color: var(--ind-yellow); }
        .theme-zimbabwe .team-banner { background-color: var(--zim-red); color: var(--zim-gold); }
        .theme-sharjah .team-banner { background-color: var(--sha-sand); color: var(--sha-teal); }
        .theme-westindies .team-banner { background-color: var(--wi-maroon); color: var(--wi-gold); }
        .theme-southafrica .team-banner { background-color: var(--sa-green); color: var(--sa-gold); }
        .theme-srilanka .team-banner { background-color: var(--sl-blue); color: var(--sl-yellow); }
        .theme-newzealand .team-banner { background-color: var(--nz-black); color: var(--nz-silver); }
        .theme-pakistan .team-banner { background-color: var(--pak-green); color: var(--pak-gold); }
        .theme-general .team-banner { background-color: var(--gen-grey); color: #fff; }

        .die {
            width: 50px; height: 50px; background: white; border: 3px solid currentColor;
            border-radius: 8px; display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem; font-weight: 800; box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .rolling { animation: shake 0.15s infinite; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, 2px) rotate(-2deg); }
            100% { transform: translate(1px, -1px) rotate(1deg); }
        }

        .chart-table th, .chart-table td { border: 1px solid #e5e7eb; padding: 2px 1px; text-align: center; font-size: 0.6rem; }
        .highlight-row { background-color: #fff9c4 !important; outline: 2px solid orange; font-weight: bold; }
        .lookup-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; font-size: 0.6rem; }

        .btn-primary { color: white; border: none; font-size: 0.9rem; cursor: pointer; }
        .btn-secondary { background-color: #666; color: white; border: none; font-size: 0.75rem; cursor: pointer; }

        .reset-match-btn {
            background-color: #dc2626; color: white; padding: 6px 12px; border-radius: 6px;
            font-size: 0.65rem; text-transform: uppercase; font-weight: 800; transition: all 0.2s;
            box-shadow: 0 3px 0px #991b1b; border: none; white-space: nowrap; cursor: pointer;
        }
        .reset-match-btn:hover { background-color: #ef4444; transform: translateY(1px); box-shadow: 0 2px 0px #991b1b; }
        .reset-match-btn:active { transform: translateY(3px); box-shadow: 0 0px 0px #991b1b; }

        .tabs-container::-webkit-scrollbar { height: 3px; }
        .tabs-container::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body id="body-root" class="theme-general">

    <div class="max-w-[1600px] mx-auto w-full flex flex-col h-full">
        <!-- Top Navigation -->
        <div class="flex items-stretch bg-white shadow-sm border-b overflow-hidden shrink-0">
            <div class="px-5 py-2 cricket-font text-sm md:text-base text-gray-700 tracking-tighter shrink-0 border-r flex items-center bg-gray-50">
                One Day International
            </div>
            <div id="tabs-nav" class="flex tabs-container overflow-x-auto whitespace-nowrap flex-grow pr-4">
            </div>
        </div>

        <!-- Dynamic Team Banner -->
        <header class="team-banner p-3 border-b-4 shadow-md transition-all duration-300 flex items-center justify-between shrink-0">
            <div>
                <h1 id="header-title" class="text-2xl md:text-3xl cricket-font uppercase tracking-tighter leading-none">Generic</h1>
            </div>
            <button onclick="resetGameUI()" class="reset-match-btn cricket-font shrink-0 ml-4">
                Reset Match Conditions
            </button>
        </header>

        <!-- Content Area -->
        <div class="flex-grow overflow-y-auto p-2 md:p-3">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-3 h-full">
                <!-- Left Interaction Column -->
                <div class="lg:col-span-3 space-y-3 flex flex-col">
                    <div class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex-1 flex flex-col justify-center">
                        <h2 class="text-[0.6rem] font-black mb-2 uppercase text-gray-800">1. Initial Weather</h2>
                        <div class="flex justify-center gap-3 mb-2">
                            <div id="die1" class="die">?</div>
                            <div id="die2" class="die">?</div>
                        </div>
                        <button onclick="rollWeather()" id="weather-btn-primary" class="btn-primary w-full cricket-font py-2 rounded-lg shadow transform active:scale-95 transition-all">ROLL WEATHER</button>
                        <div id="weather-display" class="mt-2 p-2 rounded-lg border-2 border-dashed border-gray-100 flex flex-col items-center justify-center min-h-[70px] text-center">
                            <span class="text-gray-300 text-[0.55rem] uppercase font-bold text-center tracking-widest">Awaiting Forecast...</span>
                        </div>
                    </div>

                    <div id="pitch-container" class="bg-white p-3 rounded-xl shadow-sm border border-gray-200 opacity-30 pointer-events-none transition-all flex-1 flex flex-col justify-center">
                        <h2 class="text-[0.6rem] font-black mb-2 uppercase text-gray-800">2. Pitch Result</h2>
                        <div class="flex justify-center mb-2"><div id="diePitch" class="die">?</div></div>
                        <button onclick="rollPitch()" class="btn-secondary w-full cricket-font py-1.5 rounded-lg shadow transform active:scale-95 transition-all">ROLL PITCH (1D6)</button>
                        <div class="mt-2 flex flex-col items-center text-center">
                            <div id="pitch-display" class="font-black text-3xl leading-none">---</div>
                            <div id="pitch-desc" class="mt-1 text-[0.55rem] font-bold text-gray-500 uppercase italic px-1 leading-tight">Awaiting Roll...</div>
                        </div>
                    </div>
                </div>

                <!-- Right Data Column -->
                <div class="lg:col-span-9 space-y-3 flex flex-col">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 shrink-0">
                        <div class="bg-white p-2 rounded-xl border border-gray-200 shadow-sm">
                            <h3 class="text-[8px] font-black text-gray-400 mb-1 uppercase text-center border-b pb-1">Weather 2D6 Lookup</h3>
                            <div class="lookup-grid font-mono" id="weather-lookup-table"></div>
                        </div>
                        <div class="bg-white p-2 rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                            <h3 class="text-[8px] font-black text-gray-400 mb-1 uppercase text-center border-b pb-1">Pitch conditions Grid</h3>
                            <table class="w-full chart-table">
                                <thead><tr class="bg-gray-50"><th class="w-8 text-[0.5rem]">#</th><th class="text-[0.5rem]">1</th><th class="text-[0.5rem]">2</th><th class="text-[0.5rem]">3</th><th class="text-[0.5rem]">4</th><th class="text-[0.5rem]">5</th><th class="text-[0.5rem]">6</th></tr></thead>
                                <tbody id="pitch-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="flex flex-col gap-2 flex-grow overflow-hidden">
                        <div class="bg-white p-2 rounded-xl border border-gray-200 shadow-sm">
                            <h3 class="text-[8px] font-black text-gray-400 mb-1.5 uppercase tracking-widest text-center">Weather Key (Dynamic colors)</h3>
                            <div class="grid grid-cols-5 md:grid-cols-10 gap-1.5" id="weather-key-container"></div>
                        </div>
                        <div class="bg-white p-2 rounded-xl border border-gray-200 shadow-sm overflow-y-auto">
                            <h3 class="text-[8px] font-black text-gray-400 mb-1.5 uppercase tracking-widest text-center">Pitch Type Index</h3>
                            <div class="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12 gap-1" id="pitch-key-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Atmospheric Color Mapping Function
        function getWeatherStyle(name) {
            const lower = name.toLowerCase();
            // Heavy Rain / Storms / Abandoned
            if (lower.includes("rain") || lower.includes("storm") || lower.includes("abandoned")) {
                return { bg: "#1e3a8a", text: "white" };
            }
            // Showery / Cool Showery
            if (lower.includes("showery")) {
                return { bg: "#38bdf8", text: "#0f172a" };
            }
            // Cloudy / Overcast / Humid / Hazy
            if (lower.includes("cloudy") || lower.includes("overcast") || lower.includes("humid") || lower.includes("hazy")) {
                return { bg: "#94a3b8", text: "#0f172a" };
            }
            // Sunny with some cloud / Sunny cloud about
            if (lower.includes("some cloud") || lower.includes("cloud about")) {
                return { bg: "#fde047", text: "#713f12" };
            }
            // Hot & Sunny / Sunny
            if (lower.includes("sunny") || lower.includes("hot")) {
                return { bg: "#FFD700", text: "#713f12" };
            }
            // Default Fallback
            return { bg: "#ffffff", text: "#333" };
        }

        const weatherInfoGlobal = {
            hot: { name: "Hot & Sunny", icon: "â˜€ï¸" }, sunny: { name: "Sunny", icon: "ðŸŒ¤ï¸" },
            humid: { name: "Humid (Overcast)", icon: "ðŸŒ«ï¸" }, cloudy: { name: "Cloudy", icon: "â˜ï¸" },
            showery: { name: "Showery", icon: "ðŸŒ¦ï¸" }, heavy_forecast: { name: "Heavy Showers Forecast", icon: "ðŸŒ§ï¸" },
            tstorms: { name: "Chance of Thunderstorms", icon: "â›ˆï¸" }, heavy_rain: { name: "HEAVY RAIN (No Play)", icon: "ðŸŒŠ" },
            windy: { name: "Sunny (Strong Wind)", icon: "ðŸŒ¬ï¸" }, cool_cloudy: { name: "Cloudy and Cool", icon: "ðŸ§¥" },
            cool_showery: { name: "Cool and Showery", icon: "ðŸŒ§ï¸" }, hazy: { name: "Hazy (Overcast)", icon: "ðŸŒ«ï¸" },
            sunny_cloud: { name: "Sunny Cloud About", icon: "â›…" }, overcast: { name: "Overcast", icon: "ðŸŒ«ï¸" },
            sunny_cloud_more: { name: "Sunny With Some Cloud", icon: "ðŸŒ¤ï¸" }
        };

        const pitchDescriptions = {
            "1": "Good Batting Wicket", "1A": "Dry Slow Paced Wicket", "1B": "Slow Paced and Low Bounce",
            "2": "Good Batting Wicket", "2A": "Dry and Grassless", "2B": "Good Paced Wicket",
            "3": "Normal Wicket", "4": "Normal Wicket", "5": "Normal Wicket", "5A": "Dry and Dusty",
            "6": "Green Wicket", "6A": "Hard Pitch with Excessive Bounce", "6B": "Dry and Slightly Cracked",
            "7": "Uneven Bounce", "7A": "Fast Paced Wicket", "7B": "Ball Keeping Low", "7C": "High Bounce",
            "8": "Taking Spin", "8A": "Some Help for Spinners", "8B": "Spinners Paradise",
            "9": "Wicket Showing Signs of Damage", "10": "Wicket Breaking Up"
        };

        const data = {
            aus: {
                title: "Australia", colors: { primary: "#00877a", secondary: "#FFCD00" },
                lookup: ["11=3","12=4","13=1","14=9","15=2","16=1","22=8","23=5","24=3","25=2","26=1","33=7","34=2","35=1","36=3","44=6","45=2","46=4","55=4","56=3","66=10"],
                mapping: {11:3,12:4,13:1,14:9,15:2,16:1,22:8,23:5,24:3,25:2,26:1,33:7,34:2,35:1,36:3,44:6,45:2,46:4,55:4,56:3,66:10},
                weather: {1: weatherInfoGlobal.hot, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.sunny, 5: weatherInfoGlobal.humid, 6: weatherInfoGlobal.cloudy, 7: weatherInfoGlobal.showery, 8: weatherInfoGlobal.heavy_forecast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[4,3,"1B",2,1,"2A"],2:[5,4,3,2,1,1],3:["7A",5,4,2,3,"8A"],4:["5A",5,4,3,3,2],5:["8A",6,5,5,4,4],6:[6,5,5,4,3,"2B"],7:["7B",6,5,4,3,7],8:[5,"2B","1B",5,4,3],9:[7,"7A",5,3,"1A","7B"],10:["N","O","P","L","A","Y"]}
            },
            bangladesh: {
                title: "Bangladesh", colors: { primary: "#2d944e", secondary: "#e53e3e" },
                lookup: ["11=1","12=6","13=4","14=5","15=4","16=6","22=2","23=9","24=4","25=6","26=1","33=7","34=5","35=2","36=8","44=3","45=3","46=5","55=10","56=3","66=10"],
                mapping: {11:1,12:6,13:4,14:5,15:4,16:6,22:2,23:9,24:4,25:6,26:1,33:7,34:5,35:2,36:8,44:3,45:3,46:5,55:10,56:3,66:10},
                weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.windy, 7: weatherInfoGlobal.sunny_cloud, 8: weatherInfoGlobal.sunny_cloud, 9: weatherInfoGlobal.cloudy, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:["5A","1B",3,5,"2A","7B"],2:[2,"2B","7B",1,"1A",5],3:["8A","5A",5,"2B",2,7],4:["7B","2A",3,4,5,"7A"],5:[1,"2B",4,"5A","6B",8],6:[3,"7A","7B",4,"2A","1A"],7:["2B",2,3,"6A",7,4],8:["1B",4,5,"6B","7B",8],9:[4,5,"5A",2,"2A","8A"],10:["N","O","P","L","A","Y"]}
            },
            england: { 
                title: "England", colors: { primary: "#001e4a", secondary: "#00a3e0" },
                lookup: ["11=2","12=4","13=2","14=9","15=6","16=1","22=8","23=5","24=7","25=3","26=3","33=2","34=8","35=4","36=6","44=3","45=2","46=4","55=7","56=5","66=10"], mapping: {11:2,12:4,13:2,14:9,15:6,16:1,22:8,23:5,24:7,25:3,26:3,33:2,34:8,35:4,36:6,44:3,45:2,46:4,55:7,56:5,66:10}, weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.sunny, 4: weatherInfoGlobal.sunny_cloud, 5: weatherInfoGlobal.cool_cloudy, 6: weatherInfoGlobal.cool_showery, 7: weatherInfoGlobal.overcast, 8: weatherInfoGlobal.heavy_forecast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain}, pitch: {1:[5,4,3,2,6,6],2:[5,2,3,1,4,2],3:[6,"7A",5,4,3,3],4:[7,"2B",6,5,4,3],5:["8A",5,6,5,4,2],6:[7,6,4,3,"7B",9],7:[6,"7B",3,"1B",4,2],8:["7B","2B",3,4,5,3],9:["2A","5A",4,"7A",5,4],10:["N","O","P","L","A","Y"]} 
            },
            india: { 
                title: "India", colors: { primary: "#0072bc", secondary: "#f26d21" },
                lookup: ["11=2","12=5","13=3","14=1","15=5","16=3","22=8","23=5","24=3","25=6","26=6","33=6","34=2","35=4","36=7","44=6","45=4","46=2","55=9","56=4","66=10"], mapping: {11:2,12:5,13:3,14:1,15:5,16:3,22:8,23:5,24:3,25:6,26:6,33:6,34:2,35:4,36:7,44:6,45:4,46:2,55:9,56:4,66:10}, weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.hot, 7: weatherInfoGlobal.sunny_cloud, 8: weatherInfoGlobal.sunny_cloud, 9: weatherInfoGlobal.overcast, 10: weatherInfoGlobal.heavy_rain}, pitch: {1:["8A","1B",4,5,3,"7B"],2:[7,5,"7B","1B",2,1],3:[8,"8A",5,4,3,"1A"],4:[4,7,"8A",5,3,2],5:["6B",5,4,3,2,"2A"],6:[5,4,"7B",3,3,2],7:["1A",5,4,3,"8A","5A"],8:["7B",7,5,4,3,2],9:[8,"8A",5,3,2,"1B"],10:["N","O","P","L","A","Y"]} 
            },
            zimbabwe: {
                title: "Zimbabwe", colors: { primary: "#cc0000", secondary: "#FFCD00" }, lookup: ["11=3","12=4","13=1","14=9","15=2","16=1","22=8","23=5","24=3","25=8","26=1","33=7","34=2","35=1","36=3","44=6","45=2","46=5","55=4","56=9","66=10"],
                mapping: {11:3,12:4,13:1,14:9,15:2,16:1,22:8,23:5,24:3,25:8,26:1,33:7,34:2,35:1,36:3,44:6,45:2,46:5,55:4,56:9,66:10},
                weather: {1: weatherInfoGlobal.hot, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.sunny, 5: weatherInfoGlobal.sunny_cloud, 6: weatherInfoGlobal.cloudy, 7: weatherInfoGlobal.showery, 8: weatherInfoGlobal.heavy_forecast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[1,3,"7A",1,"2B",5],2:["1B",4,3,2,1,1],3:["7A",5,4,2,3,"8A"],4:["1B",5,4,"2B",3,2],5:["8A",6,5,2,1,4],6:[6,5,"1B",4,3,5],7:[5,"1B",3,"8A",5,4],8:[5,2,"7B",1,3,"1B"],9:[7,6,5,4,3,"2A"],10:["N","O","P","L","A","Y"]}
            },
            sharjah: {
                title: "Sharjah", colors: { primary: "#c2a370", secondary: "#006666" }, lookup: ["11=6","12=1","13=6","14=7","15=4","16=8","22=10","23=5","24=2","25=3","26=2","33=2","34=2","35=10","36=5","44=4","45=4","46=6","55=9","56=7","66=9"],
                mapping: {11:6,12:1,13:6,14:7,15:4,16:8,22:10,23:5,24:2,25:3,26:2,33:2,34:2,35:10,36:5,44:4,45:4,46:6,55:9,56:7,66:9},
                weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.hot, 7: weatherInfoGlobal.hot, 8: weatherInfoGlobal.sunny_cloud, 9: weatherInfoGlobal.hazy, 10: weatherInfoGlobal.tstorms},
                pitch: {1:[4,"2A",2,"1B",5,3],2:["2A",2,"1B","1A",3,"5A"],3:["6B",7,4,"1A",2,"2B"],4:["7A",1,"1B","2A",2,5],5:["2B","1A",3,4,5,"6A"],6:["6B","5A","2A","2B",2,1],7:[4,"5A","2B",2,"2A","1A"],8:["7B","8A",4,5,2,1],9:["1A","5A","6B","7B","7C","7A"],10:[8,1,"2A",5,"7B",2]}
            },
            westindies: {
                title: "West Indies", colors: { primary: "#7b0000", secondary: "#ffcc00" }, lookup: ["11=2","12=3","13=1","14=2","15=4","16=9","22=5","23=4","24=8","25=2","26=3","33=9","34=4","35=6","36=3","44=7","45=1","46=2","55=5","56=3","66=10"],
                mapping: {11:2,12:3,13:1,14:2,15:4,16:9,22:5,23:4,24:8,25:2,26:3,33:9,34:4,35:6,36:3,44:7,45:1,46:2,55:5,56:3,66:10},
                weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.windy, 7: weatherInfoGlobal.cloudy, 8: weatherInfoGlobal.overcast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:["7A","7C",2,1,"5A","6A"],2:[4,1,"2A","2B","6A","7A"],3:[5,4,3,"2A","2B",7],4:[7,5,4,3,2,"7A"],5:["5A",4,3,"2A","7B","6A"],6:["8A",5,4,3,"2B","7A"],7:[5,5,4,4,"2A","7A"],8:[5,4,3,2,1,7],9:[7,5,5,4,3,3],10:["N","O","P","L","A","Y"]}
            },
            southafrica: {
                title: "South Africa", colors: { primary: "#006a4e", secondary: "#ffcc00" }, lookup: ["11=3","12=4","13=1","14=9","15=2","16=1","22=8","23=5","24=3","25=2","26=1","33=7","34=2","35=1","36=3","44=6","45=2","46=5","55=4","56=3","66=10"],
                mapping: {11:3,12:4,13:1,14:9,15:2,16:1,22:8,23:5,24:3,25:2,26:1,33:7,34:2,35:1,36:3,44:6,45:2,46:5,55:4,56:3,66:10},
                weather: {1: weatherInfoGlobal.hot, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.sunny, 5: weatherInfoGlobal.sunny_cloud, 6: weatherInfoGlobal.cloudy, 7: weatherInfoGlobal.showery, 8: weatherInfoGlobal.heavy_forecast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[4,3,"7A",1,"2B",5],2:[5,4,3,2,1,1],3:["7A",5,4,2,3,"8A"],4:["7A",5,4,2,3,2],5:["8A",6,5,2,1,4],6:[6,5,"1B",4,3,5],7:[5,"1B",3,"8A",5,4],8:[5,2,"7B",4,3,"1B"],9:[7,6,5,4,3,"2A"],10:["N","O","P","L","A","Y"]}
            },
            srilanka: {
                title: "Sri Lanka", colors: { primary: "#002f6c", secondary: "#ffcc00" }, lookup: ["11=2","12=5","13=3","14=1","15=5","16=3","22=8","23=5","24=3","25=6","26=6","33=6","34=2","35=4","36=7","44=6","45=4","46=2","55=9","56=4","66=10"],
                mapping: {11:2,12:5,13:3,14:1,15:5,16:3,22:8,23:5,24:3,25:6,26:6,33:6,34:2,35:4,36:7,44:6,45:4,46:2,55:9,56:4,66:10},
                weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.hot, 7: weatherInfoGlobal.sunny_cloud, 8: weatherInfoGlobal.sunny_cloud, 9: weatherInfoGlobal.overcast, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[5,4,6,3,"1B",2],2:["5A",5,4,"2A",2,1],3:["8A",5,"5A",4,3,"1A"],4:[7,3,4,5,3,2],5:[5,4,4,"7B",2,"2A"],6:["6B",7,3,5,3,2],7:[7,5,5,4,4,3],8:[6,"1B",5,4,3,"8A"],9:["7B",5,4,6,4,3],10:["N","O","P","L","A","Y"]}
            },
            newzealand: {
                title: "New Zealand", colors: { primary: "#1a1a1a", secondary: "#a0a0a0" }, lookup: ["11=3","12=4","13=2","14=9","15=6","16=1","22=6","23=5","24=7","25=3","26=3","33=2","34=8","35=4","36=6","44=3","45=2","46=3","55=5","56=3","66=10"],
                mapping: {11:3,12:4,13:2,14:9,15:6,16:1,22:6,23:5,24:7,25:3,26:3,33:2,34:8,35:4,36:6,44:3,45:2,46:3,55:5,56:3,66:10},
                weather: {1: weatherInfoGlobal.humid, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.sunny, 4: weatherInfoGlobal.sunny_cloud, 5: weatherInfoGlobal.cloudy, 6: weatherInfoGlobal.cool_showery, 7: weatherInfoGlobal.overcast, 8: weatherInfoGlobal.heavy_forecast, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[6,5,4,4,3,2],2:[9,6,"1B",3,2,1],3:["8A",5,1,4,3,3],4:[7,6,5,4,3,"7B"],5:["8A",6,5,5,4,4],6:[7,6,5,3,"2B",3],7:[5,"1A",6,5,2,3],8:["7B",2,4,4,5,3],9:["7C",6,4,4,3,2],10:["N","O","P","L","A","Y"]}
            },
            pakistan: {
                title: "Pakistan", colors: { primary: "#004d00", secondary: "#ffcc00" }, lookup: ["11=2","12=1","13=5","14=3","15=2","16=6","22=9","23=4","24=4","25=4","26=6","33=3","34=7","35=1","36=3","44=8","45=5","46=1","55=4","56=2","66=10"],
                mapping: {11:2,12:1,13:5,14:3,15:2,16:6,22:9,23:4,24:4,25:4,26:6,33:3,34:7,35:1,36:3,44:8,45:5,46:1,55:4,56:2,66:10},
                weather: {1: weatherInfoGlobal.hot, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.hot, 4: weatherInfoGlobal.hot, 5: weatherInfoGlobal.hot, 6: weatherInfoGlobal.hot, 7: weatherInfoGlobal.sunny_cloud, 8: weatherInfoGlobal.sunny_cloud, 9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain},
                pitch: {1:[4,3,2,"2A",1,"1A"],2:["5A",4,"7B",2,"2A","1A"],3:[7,4,2,1,"2A","1A"],4:[5,4,4,3,2,"1B"],5:[5,4,3,2,1,"1A"],6:[5,5,4,3,"2A","2A"],7:[5,4,3,"7B",2,"1B"],8:["8A",5,4,3,"2A","1A"],9:[7,"8A",4,3,2,1],10:["N","O","P","L","A","Y"]}
            },
            general: {
                title: "Generic", colors: { primary: "#475569", secondary: "#94a3b8" },
                lookup: ["11=3","23=5","36=6","12=4","24=7","44=3","13=2","25=3","45=2","14=9","26=3","46=4","15=6","33=1","55=7","16=1","34=8","56=5","22=8","35=4","66=10"],
                mapping: {11:3, 12:4, 13:2, 14:9, 15:6, 16:1, 22:8, 23:5, 24:7, 25:3, 26:3, 33:1, 34:8, 35:4, 36:6, 44:3, 45:2, 46:4, 55:7, 56:5, 66:10},
                weather: {
                    1: weatherInfoGlobal.hot, 2: weatherInfoGlobal.hot, 3: weatherInfoGlobal.sunny, 
                    4: weatherInfoGlobal.sunny_cloud_more, 5: weatherInfoGlobal.cloudy, 6: weatherInfoGlobal.showery,
                    7: weatherInfoGlobal.overcast, 8: weatherInfoGlobal.heavy_forecast, 
                    9: weatherInfoGlobal.tstorms, 10: weatherInfoGlobal.heavy_rain
                },
                pitch: {
                    1: [1,1,2,3,4,5], 2: [1,2,3,4,5,5], 3: [2,3,4,4,5,5], 
                    4: [3,4,5,5,6,7], 5: [4,4,5,5,6,6], 6: [3,3,4,4,5,7],
                    7: [3,4,5,5,6,7], 8: [3,3,4,4,5,6], 9: [3,3,4,5,5,7],
                    10: ["N","O","P","L","A","Y"]
                }
            }
        };

        let currentTeamKey = 'general';
        let activeWeatherNum = null;

        function renderTabs() {
            const container = document.getElementById('tabs-nav');
            container.innerHTML = '';
            const sortedKeys = Object.keys(data).sort((a, b) => {
                if (data[a].title === "Generic") return -1;
                if (data[b].title === "Generic") return 1;
                return data[a].title.localeCompare(data[b].title);
            });
            sortedKeys.forEach(key => {
                const btn = document.createElement('div');
                btn.id = `tab-${key}`;
                btn.className = `tab-btn ${key === currentTeamKey ? 'active-tab' : ''}`;
                btn.textContent = data[key].title;
                btn.onclick = () => switchTeam(key);
                container.appendChild(btn);
            });
        }

        function switchTeam(teamKey) {
            currentTeamKey = teamKey;
            const teamData = data[teamKey];
            document.getElementById('body-root').className = `theme-${teamKey}`;
            const tabs = document.querySelectorAll('.tab-btn');
            tabs.forEach(t => t.classList.remove('active-tab'));
            const activeTab = document.getElementById(`tab-${teamKey}`);
            if (activeTab) activeTab.classList.add('active-tab');
            document.getElementById('header-title').textContent = teamData.title;
            
            // BANGLADESH specific color fix
            if (teamKey === 'bangladesh') {
                document.getElementById('header-title').style.color = 'var(--bg-red)';
            } else {
                document.getElementById('header-title').style.color = '';
            }

            const weatherBtn = document.getElementById('weather-btn-primary');
            if (weatherBtn) weatherBtn.style.backgroundColor = teamData.colors.primary;
            resetGameUI(); setupTables(); renderWeatherKey(); renderPitchKey();
        }

        function setupTables() {
            const teamData = data[currentTeamKey];
            const weatherGrid = document.getElementById('weather-lookup-table');
            weatherGrid.innerHTML = '';
            teamData.lookup.forEach(item => {
                const div = document.createElement('div');
                div.className = "border-b border-r p-1 text-center text-[0.55rem] font-bold text-gray-600";
                div.textContent = item;
                weatherGrid.appendChild(div);
            });
            const tbody = document.getElementById('pitch-table-body');
            tbody.innerHTML = '';
            for(let i=1; i<=10; i++) {
                const row = document.createElement('tr'); row.id = `row-${i}`;
                let cells = `<td class="bg-gray-50 font-bold text-[0.55rem]">${i}</td>`;
                teamData.pitch[i].forEach(val => cells += `<td class="text-[0.55rem]">${val}</td>`);
                row.innerHTML = cells; tbody.appendChild(row);
            }
        }

        function renderWeatherKey() {
            const teamData = data[currentTeamKey];
            const container = document.getElementById('weather-key-container');
            container.innerHTML = '';
            for(let i=1; i<=10; i++) {
                const info = teamData.weather[i];
                const capsule = document.createElement('div');
                capsule.className = `info-capsule`;
                
                // DYNAMIC COLOR ENGINE
                const style = getWeatherStyle(info.name);
                capsule.style.backgroundColor = style.bg;
                capsule.style.color = style.text;

                capsule.innerHTML = `
                    <div class="num-container">${i}</div>
                    <div class="txt-container">
                        <div class="txt text-[0.45rem] md:text-[0.55rem] font-black uppercase leading-tight">${info.name}</div>
                    </div>
                `;
                container.appendChild(capsule);
            }
        }

        function renderPitchKey() {
            const container = document.getElementById('pitch-key-container');
            container.innerHTML = '';
            const codes = Object.keys(pitchDescriptions).sort((a,b) => a.localeCompare(b, undefined, {numeric: true}));
            codes.forEach(code => {
                const capsule = document.createElement('div');
                capsule.className = `info-capsule`;
                capsule.style.backgroundColor = '#f8fafc';
                capsule.style.color = '#334155';
                capsule.innerHTML = `
                    <div class="num-container" style="background-color: #64748b">${code}</div>
                    <div class="txt-container">
                        <div class="txt text-[0.45rem] font-bold uppercase leading-none px-1">${pitchDescriptions[code]}</div>
                    </div>
                `;
                container.appendChild(capsule);
            });
        }

        function rollWeather() {
            const d1 = document.getElementById('die1'), d2 = document.getElementById('die2');
            const display = document.getElementById('weather-display'), pitchCont = document.getElementById('pitch-container');
            d1.classList.add('rolling'); d2.classList.add('rolling');
            display.innerHTML = '<span class="animate-pulse uppercase text-[0.5rem] font-bold">Forecasting...</span>';
            setTimeout(() => {
                const r1 = Math.floor(Math.random() * 6) + 1, r2 = Math.floor(Math.random() * 6) + 1;
                const low = Math.min(r1, r2), high = Math.max(r1, r2), key = parseInt(`${low}${high}`);
                activeWeatherNum = data[currentTeamKey].mapping[key];
                const info = data[currentTeamKey].weather[activeWeatherNum];
                d1.textContent = low; d2.textContent = high;
                d1.classList.remove('rolling'); d2.classList.remove('rolling');
                
                // DYNAMIC COLOR ENGINE
                const style = getWeatherStyle(info.name);
                display.className = `mt-2 p-2 rounded-xl shadow-inner border-4 flex flex-col items-center justify-center transition-all`;
                display.style.backgroundColor = style.bg;
                display.style.borderColor = data[currentTeamKey].colors.primary; 
                display.style.color = style.text;

                display.innerHTML = `
                    <div class="text-2xl mb-1">${info.icon}</div>
                    <div class="text-[0.5rem] font-black opacity-60 uppercase">Match #${activeWeatherNum}</div>
                    <div class="text-sm font-black uppercase text-center leading-none">${info.name}</div>
                `;
                document.querySelectorAll('tr').forEach(tr => tr.classList.remove('highlight-row'));
                const row = document.getElementById(`row-${activeWeatherNum}`);
                if (row) row.classList.add('highlight-row');
                if (activeWeatherNum === 10) { 
                    pitchCont.style.opacity = "0.3"; pitchCont.style.pointerEvents = "none"; 
                    document.getElementById('pitch-display').textContent = "OFF"; 
                    document.getElementById('pitch-desc').textContent = "MATCH ABANDONED";
                } else { pitchCont.style.opacity = "1"; pitchCont.style.pointerEvents = "auto"; }
            }, 700);
        }

        function rollPitch() {
            const pdie = document.getElementById('diePitch'), pdisp = document.getElementById('pitch-display'), pdesc = document.getElementById('pitch-desc');
            pdie.classList.add('rolling'); pdisp.textContent = "..."; pdesc.textContent = "Checking Wicket...";
            setTimeout(() => {
                const roll = Math.floor(Math.random() * 6) + 1;
                pdie.textContent = roll; pdie.classList.remove('rolling');
                const result = data[currentTeamKey].pitch[activeWeatherNum][roll - 1];
                pdisp.textContent = result;
                pdisp.style.color = data[currentTeamKey].colors.primary;
                pdesc.textContent = pitchDescriptions[result] || "No Play Possible";
            }, 500);
        }

        function resetGameUI() {
            activeWeatherNum = null;
            document.getElementById('die1').textContent = "?"; document.getElementById('die2').textContent = "?";
            document.getElementById('diePitch').textContent = "?"; 
            document.getElementById('pitch-display').textContent = "---";
            document.getElementById('pitch-display').style.color = "inherit";
            document.getElementById('pitch-desc').textContent = "Awaiting Roll...";
            document.getElementById('weather-display').innerHTML = '<span class="text-gray-300 text-[0.5rem] uppercase font-bold text-center tracking-widest">Awaiting Forecast...</span>';
            document.getElementById('weather-display').className = "mt-2 p-3 rounded-xl border-2 border-dashed border-gray-100 flex flex-col items-center justify-center min-h-[70px] text-center";
            document.getElementById('weather-display').style.backgroundColor = "transparent";
            document.getElementById('weather-display').style.borderColor = "#f3f4f6";
            document.getElementById('pitch-container').style.opacity = "0.3"; document.getElementById('pitch-container').style.pointerEvents = "none";
            document.querySelectorAll('tr').forEach(tr => tr.classList.remove('highlight-row'));
        }

        renderTabs(); switchTeam('general');
    </script>
</body>
</html>